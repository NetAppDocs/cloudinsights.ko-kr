---
sidebar: sidebar 
permalink: task_config_telegraf_agent.html 
keywords: telegraf, installation, install, agent, telegraf agent 
summary: Cloud Insights는 통합 데이터 수집을 위한 에이전트로 Teleraf를 지원하며 Windows, Linux, macOS 및 Kubernetes에서 구성할 수 있습니다. 
---
= 데이터 수집을 위한 에이전트 구성(Windows/Linux/Mac)
:allow-uri-read: 


[role="lead"]
Cloud Insights는 을 사용합니다 link:https://docs.influxdata.com/telegraf["텔레그라프"] 통합 데이터 수집을 위한 에이전트로 사용됩니다. Telegraf는 메트릭, 이벤트 및 로그를 수집 및 보고하는 데 사용할 수 있는 플러그인 기반 서버 에이전트입니다. 입력 플러그인은 시스템/OS에 직접 액세스하거나 타사 API를 호출하거나 구성된 스트림(예 Kafka, statsd 등). 출력 플러그인은 에이전트에서 Cloud Insights로 수집된 메트릭, 이벤트 및 로그를 전송하는 데 사용됩니다.

Cloud Insights의 최신 Telegraf 버전은 * 1.19.3 * 입니다.


NOTE: 정확한 감사 및 데이터 보고를 위해 * NTP(Network Time Protocol) * 또는 * SNTP(Simple Network Time Protocol) * 를 사용하여 Agent 시스템의 시간을 동기화하는 것이 좋습니다.


NOTE: Agent를 설치하기 전에 설치 파일을 확인하려면 의 아래 섹션을 참조하십시오 <<Verifying Checksums>>.



== Agent 설치

서비스 데이터 수집기를 설치하고 아직 Agent를 구성하지 않은 경우 해당 운영 체제에 대한 Agent를 먼저 설치하라는 메시지가 표시됩니다. 이 항목에서는 다음과 같은 운영 체제에 Telegraf 에이전트를 설치하는 지침을 제공합니다.

* <<Windows>>
* <<RHEL and CentOS>>
* <<Ubuntu and Debian>>
* <<macOS>>
* <<Kubernetes>>


사용 중인 플랫폼에 관계없이 에이전트를 설치하려면 먼저 다음을 수행해야 합니다.

. 에이전트에 사용할 호스트에 로그인합니다.
. Cloud Insights 사이트에 로그인하고 * 관리자 > 데이터 수집기 * 로 이동합니다.
. Data Collector * 를 클릭하고 설치할 데이터 수집기를 선택합니다.


. 호스트에 적합한 플랫폼 선택(Windows, Linux, macOS 등)
. 각 플랫폼의 나머지 단계를 따릅니다.



NOTE: 호스트에 에이전트를 설치한 후에는 해당 호스트에 에이전트를 다시 설치할 필요가 없습니다.


TIP: 서버/VM에 에이전트를 설치한 경우 Cloud Insights는 사용자가 구성한 모든 데이터 수집기에서 취합할 뿐만 아니라 해당 시스템으로부터 메트릭을 수집합니다. 이러한 메트릭은 로 수집됩니다 link:task_config_telegraf_node.html[""노드" 메트릭"].


NOTE: 프록시를 사용하는 경우 Telegraf 에이전트를 설치하기 전에 해당 플랫폼의 프록시 지침을 읽으십시오.



=== Windows

image:AgentInstallWindows.png["Windows Agent 설치"]

.전제 조건:
* PowerShell을 설치해야 합니다
* 프록시 뒤에 있는 경우 * Windows*용 프록시 지원 구성 섹션의 지침을 따르십시오.


.Windows에서 에이전트를 설치하는 단계:
. 상담원 액세스 키를 선택합니다.
. 에이전트 설치 대화 상자에서 명령 블록을 복사합니다. 클립보드 아이콘을 클릭하여 명령을 빠르게 클립보드에 복사할 수 있습니다.
. PowerShell 창을 엽니다
. 명령을 PowerShell 창에 붙여넣고 Enter 키를 누릅니다.
. 명령은 적절한 에이전트 설치 프로그램을 다운로드하고 설치하고 기본 구성을 설정합니다. 완료되면 에이전트 서비스가 다시 시작됩니다. 명령에 고유한 키가 있으며 24시간 동안 유효합니다.
. 마침 * 또는 * 계속 * 을 클릭합니다


에이전트를 설치한 후 다음 명령을 사용하여 서비스를 시작/중지할 수 있습니다.

....
Start-Service telegraf
Stop-Service telegraf
....


==== Windows에 대한 프록시 지원 구성


NOTE: 아래 단계에서는 _http_proxy/https_proxy_environment 변수를 설정하는 데 필요한 작업을 간략히 설명합니다. 일부 프록시 환경에서는 _no_proxy 환경_변수를 설정해야 할 수도 있습니다.

프록시 뒤에 있는 시스템의 경우, 다음과 같이 Telegraf 에이전트를 설치하기 전에 _https_proxy_and/or_http_proxy_environment 변수 * 를 설정하십시오.

 [System.Environment]::SetEnvironmentVariable(“https_proxy”, “<proxy_server>:<proxy_port>”, [System.EnvironmentVariableTarget]::Machine)


==== Agent를 제거합니다

Windows에서 에이전트를 제거하려면 PowerShell 창에서 다음을 수행합니다.

. Telegraf 서비스를 중지하고 삭제합니다.
+
....
Stop-Service telegraf
sc.exe delete telegraf
....
. trustore에서 인증서를 제거합니다.
+
....
cd Cert:\CurrentUser\Root
rm E5FB7B68C08B1CA902708584C274F8EFC7BE8ABC
....
. C:\Program Files\Telegraf_폴더를 삭제하여 바이너리, 로그 및 구성 파일을 제거합니다
. 레지스트리에서 _SYSTEM\CurrentControlSet\Services\EventLog\Application\Telegraf_key를 제거합니다




==== Agent 업그레이드 중

Telegraf 에이전트를 업그레이드하려면 다음을 수행합니다.

. Telegraf 서비스를 중지하고 삭제합니다.
+
....
Stop-Service telegraf
sc.exe delete telegraf
....
. 레지스트리에서 _SYSTEM\CurrentControlSet\Services\EventLog\Application\Telegraf_key를 삭제합니다
. Delete_C:\Program Files\Telegraf\Telegraf.conf _
. Delete_C:\Program Files\Telegraf\Telegraf.exe_
. link:#windows["새 에이전트를 설치합니다"].




=== RHEL 및 CentOS

image:Agent_Requirements_Rhel.png["RHEL/CentOS 에이전트 설치"]

.전제 조건:
* curl, sudo, ping, sha256sum, openssl, 그리고 디미데드도 있습니다
* 프록시 뒤에 있는 경우 * RHEL/CentOS*용 프록시 지원 구성 섹션의 지침을 따르십시오.


.RHEL/CentOS에 에이전트를 설치하는 단계:
. 상담원 액세스 키를 선택합니다.
. 에이전트 설치 대화 상자에서 명령 블록을 복사합니다. 클립보드 아이콘을 클릭하여 명령을 빠르게 클립보드에 복사할 수 있습니다.
. Bash 창을 엽니다
. Bash 창에 명령을 붙여넣고 Enter 키를 누릅니다.
. 명령은 적절한 에이전트 설치 프로그램을 다운로드하고 설치하고 기본 구성을 설정합니다. 완료되면 에이전트 서비스가 다시 시작됩니다. 명령에 고유한 키가 있으며 24시간 동안 유효합니다.
. 마침 * 또는 * 계속 * 을 클릭합니다


에이전트를 설치한 후 다음 명령을 사용하여 서비스를 시작/중지할 수 있습니다.

운영 체제에서 systemd(CentOS 7+ 및 RHEL 7+)를 사용하는 경우:

....
sudo systemctl start telegraf
sudo systemctl stop telegraf
....
운영 체제에서 systemd(CentOS 7+ 및 RHEL 7+)를 사용하지 않는 경우:

....
sudo service telegraf start
sudo service telegraf stop
....


==== RHEL/CentOS에 대한 프록시 지원 구성


NOTE: 아래 단계에서는 _http_proxy/https_proxy_environment 변수를 설정하는 데 필요한 작업을 간략히 설명합니다. 일부 프록시 환경에서는 _no_proxy 환경_변수를 설정해야 할 수도 있습니다.

프록시 뒤에 있는 시스템의 경우 Telegraf 에이전트를 설치하기 전에 * 다음 단계를 수행하십시오.

. 현재 사용자에 대한 _https_proxy_and/or_http_proxy_environment 변수를 설정합니다.
+
 export https_proxy=<proxy_server>:<proxy_port>
. /etc/default/Telegraf_를 생성하고 _https_proxy_and/or_http_proxy_variable 에 대한 정의를 삽입합니다.
+
 https_proxy=<proxy_server>:<proxy_port>




==== Agent를 제거합니다

RHEL/CentOS에서 에이전트를 제거하려면 Bash 터미널에서 다음을 수행합니다.

. Telegraf 서비스 중지:
+
....
systemctl stop telegraf (If your operating system is using systemd (CentOS 7+ and RHEL 7+)
/etc/init.d/telegraf stop (for systems without systemd support)
....
. Telegraf 에이전트를 제거합니다.
+
 yum remove telegraf
. 뒤에 남아 있을 수 있는 구성 또는 로그 파일을 제거합니다.
+
....
rm -rf /etc/telegraf*
rm -rf /var/log/telegraf*
....




==== Agent 업그레이드 중

Telegraf 에이전트를 업그레이드하려면 다음을 수행합니다.

. Telegraf 서비스 중지:
+
....
systemctl stop telegraf (If your operating system is using systemd (CentOS 7+ and RHEL 7+)
/etc/init.d/telegraf stop (for systems without systemd support)
....
. 이전 Telegraf 에이전트를 제거합니다.
+
 yum remove telegraf
. link:#rhel-and-centos["새 에이전트를 설치합니다"].




=== Ubuntu 및 Debian

image:Agent_Requirements_Ubuntu.png["Ubuntu/Debian Agent 설치"]

.전제 조건:
* curl, sudo, ping, sha256sum, openssl, 그리고 디미데드도 있습니다
* 프록시 뒤에 있는 경우 Ubuntu/Debian*용 프록시 지원 구성 섹션의 지침을 따르십시오.


.Debian 또는 Ubuntu에 에이전트를 설치하는 단계:
. 상담원 액세스 키를 선택합니다.
. 에이전트 설치 대화 상자에서 명령 블록을 복사합니다. 클립보드 아이콘을 클릭하여 명령을 빠르게 클립보드에 복사할 수 있습니다.
. Bash 창을 엽니다
. Bash 창에 명령을 붙여넣고 Enter 키를 누릅니다.
. 명령은 적절한 에이전트 설치 프로그램을 다운로드하고 설치하고 기본 구성을 설정합니다. 완료되면 에이전트 서비스가 다시 시작됩니다. 명령에 고유한 키가 있으며 24시간 동안 유효합니다.
. 마침 * 또는 * 계속 * 을 클릭합니다


에이전트를 설치한 후 다음 명령을 사용하여 서비스를 시작/중지할 수 있습니다.

운영 체제에서 systemd를 사용하는 경우:

....
sudo systemctl start telegraf
sudo systemctl stop telegraf
....
운영 체제에서 systemd를 사용하지 않는 경우:

....
sudo service telegraf start
sudo service telegraf stop
....


==== Ubuntu/Debian에 대한 프록시 지원 구성


NOTE: 아래 단계에서는 _http_proxy/https_proxy_environment 변수를 설정하는 데 필요한 작업을 간략히 설명합니다. 일부 프록시 환경에서는 _no_proxy 환경_변수를 설정해야 할 수도 있습니다.

프록시 뒤에 있는 시스템의 경우 Telegraf 에이전트를 설치하기 전에 * 다음 단계를 수행하십시오.

. 현재 사용자에 대한 _https_proxy_and/or_http_proxy_environment 변수를 설정합니다.
+
 export https_proxy=<proxy_server>:<proxy_port>
. /etc/default/telgraf를 만들고 _https_proxy_and/or_http_proxy_variable에 대한 정의를 삽입합니다.
+
 https_proxy=<proxy_server>:<proxy_port>




==== Agent를 제거합니다

Ubuntu/Debian에서 에이전트를 제거하려면 Bash 터미널에서 다음을 실행합니다.

. Telegraf 서비스 중지:
+
....
systemctl stop telegraf (If your operating system is using systemd)
/etc/init.d/telegraf stop (for systems without systemd support)
....
. Telegraf 에이전트를 제거합니다.
+
 dpkg -r telegraf
. 뒤에 남아 있을 수 있는 구성 또는 로그 파일을 제거합니다.
+
....
rm -rf /etc/telegraf*
rm -rf /var/log/telegraf*
....




==== Agent 업그레이드 중

Telegraf 에이전트를 업그레이드하려면 다음을 수행합니다.

. Telegraf 서비스 중지:
+
....
systemctl stop telegraf (If your operating system is using systemd)
/etc/init.d/telegraf stop (for systems without systemd support)
....
. 이전 Telegraf 에이전트를 제거합니다.
+
 dpkg -r telegraf
. link:#ubuntu-and-debian["새 에이전트를 설치합니다"].




=== macOS

image:Agent_Requirements_Macos.png["macOS 에이전트 설치"]

.전제 조건:
* curl, sudo, openssl 및 shasum 명령을 사용할 수 있어야 합니다
* 프록시 뒤에 있는 경우 * macOS * 용 프록시 지원 구성 섹션의 지침을 따르십시오.


.macOS에서 에이전트를 설치하는 단계:
. 상담원 액세스 키를 선택합니다.
. 에이전트 설치 대화 상자에서 명령 블록을 복사합니다. 클립보드 아이콘을 클릭하여 명령을 빠르게 클립보드에 복사할 수 있습니다.
. Bash 창을 엽니다
. Bash 창에 명령을 붙여넣고 Enter 키를 누릅니다.
. 명령은 적절한 에이전트 설치 프로그램을 다운로드하고 설치하고 기본 구성을 설정합니다. 완료되면 에이전트 서비스가 다시 시작됩니다. 명령에 고유한 키가 있으며 24시간 동안 유효합니다.
. 이전에 HomeBrew를 사용하여 Telegraf 에이전트를 설치한 경우 설치 제거하라는 메시지가 표시됩니다. 이전에 설치된 Telegraf 에이전트를 제거한 후 위의 5단계에서 명령을 다시 실행합니다.
. 마침 * 또는 * 계속 * 을 클릭합니다


에이전트를 설치한 후 다음 명령을 사용하여 서비스를 시작/중지할 수 있습니다.

....
sudo launchctl start telegraf
sudo launchctl stop telegraf
....


==== macOS에 대한 프록시 지원을 구성합니다


NOTE: 아래 단계에서는 _http_proxy/https_proxy_environment 변수를 설정하는 데 필요한 작업을 간략히 설명합니다. 일부 프록시 환경에서는 _no_proxy 환경_변수를 설정해야 할 수도 있습니다.

프록시 뒤에 상주하는 시스템의 경우, Telegraf 에이전트를 설치하기 전에 현재 사용자의 _https_proxy_and/or_http_proxy_environment 변수를 * 로 설정하려면 다음을 수행하십시오.

 export https_proxy=<proxy_server>:<proxy_port>
* Telegraf 에이전트를 설치한 후 _/Applications/Telegraf.app/Contents/telegraf.plist_: 에서 적절한 _https_proxy_and/또는 _http_proxy_variable 를 추가하고 설정합니다

....
…
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
   <key>EnvironmentVariables</key>
   <dict>
          <key>https_proxy</key>
          <string><proxy_server>:<proxy_port></string>
   </dict>
   <key>Program</key>
   <string>/Applications/telegraf.app/Contents/MacOS/telegraf</string>
   <key>Label</key>
   <string>telegraf</string>
   <key>ProgramArguments</key>
   <array>
     <string>/Applications/telegraf.app/Contents/MacOS/telegraf</string>
     <string>--config</string>
     <string>/usr/local/etc/telegraf.conf</string>
     <string>--config-directory</string>
     <string>/usr/local/etc/telegraf.d</string>
   </array>
   <key>RunAtLoad</key>
   <true/>
</dict>
</plist>
…
....
그런 다음 위의 변경 사항을 로드한 후 Telegraf를 다시 시작합니다.

....
sudo launchctl stop telegraf
sudo launchctl unload -w /Library/LaunchDaemons/telegraf.plist
sudo launchctl load -w /Library/LaunchDaemons/telegraf.plist
sudo launchctl start telegraf
....


==== Agent를 제거합니다

macOS에서 에이전트를 제거하려면 Bash 터미널에서 다음을 실행합니다.

. Telegraf 서비스 중지:
+
 sudo launchctl stop telegraf
. Telegraf 에이전트를 제거합니다.
+
....
cp /Applications/telegraf.app/scripts/uninstall /tmp
sudo /tmp/uninstall
....
. 뒤에 남아 있을 수 있는 구성 또는 로그 파일을 제거합니다.
+
....
rm -rf /usr/local/etc/telegraf*
rm -rf /usr/local/var/log/telegraf.*
....




==== Agent 업그레이드 중

Telegraf 에이전트를 업그레이드하려면 다음을 수행합니다.

. Telegraf 서비스 중지:
+
 sudo launchctl stop telegraf
. 이전 Telegraf 에이전트를 제거합니다.
+
....
cp /Applications/telegraf.app/scripts/uninstall /tmp
sudo /tmp/uninstall
....
. link:#macos["새 에이전트를 설치합니다"].




=== 쿠버네티스

Kubernetes Agent 지침이 새 페이지로 이동했습니다. 제발 link:task_config_telegraf_agent_k8s.html["* 여기로 이동 *"] 최신 Kubernetes 에이전트 지침을 보려면



== 체크섬을 확인하는 중입니다

Cloud Insights 에이전트 설치 프로그램은 무결성 검사를 수행하지만 일부 사용자는 다운로드한 아티팩트를 설치하거나 적용하기 전에 자체 검증을 수행하려고 할 수 있습니다. 기본 다운로드 및 설치 대신 다운로드 전용 작업을 수행하기 위해 이러한 사용자는 UI에서 가져온 에이전트 설치 명령을 편집하고 뒤에 오는 "설치" 옵션을 제거할 수 있습니다.

다음 단계를 수행하십시오.

. 지시에 따라 Agent Installer 스니펫을 복사합니다.
. 코드 조각을 명령 창에 붙여 넣는 대신 텍스트 편집기에 붙여 넣습니다.
. 명령에서 뒤에 오는 "--install"(Linux/Mac) 또는 "-install"(Windows)을 제거합니다.
. 텍스트 편집기에서 전체 명령을 복사합니다.
. 이제 명령 창(작업 디렉토리)에 붙여넣고 실행합니다.


Windows 이외의 경우(이러한 예는 Kubernetes에 해당하고, 실제 스크립트 이름은 다를 수 있음):

* 다운로드 및 설치(기본값):
+
 installerName=cloudinsights-kubernetes.sh … && sudo -E -H ./$installerName --download –-install
* 다운로드 전용:
+
 installerName=cloudinsights-kubernetes.sh … && sudo -E -H ./$installerName --download


창:

* 다운로드 및 설치(기본값):
+
 !$($installerName=".\cloudinsights-windows.ps1") … -and $(&$installerName -download -install)
* 다운로드 전용:
+
 !$($installerName=".\cloudinsights-windows.ps1") … -and $(&$installerName -download)


download-only 명령은 필요한 모든 아티팩트를 Cloud Insights에서 작업 디렉토리로 다운로드합니다. 아티팩트에는 다음이 포함되지만 이에 국한되지는 않습니다.

* 설치 스크립트
* 환경 파일입니다
* YAML 파일
* 서명된 체크섬 파일(SHA256.signed)
* 서명 확인을 위한 PEM 파일(NetApp_cert.pem


육안 검사를 통해 설치 스크립트, 환경 파일 및 YAML 파일을 확인할 수 있습니다.

PEM 파일의 지문이 다음과 같은 것인지 확인하여 PEM 파일을 확인할 수 있습니다.

 E5:FB:7B:68:C0:8B:1C:A9:02:70:85:84:C2:74:F8:EF:C7:BE:8A:BC
보다 구체적으로,

* 비 Windows:
+
 openssl x509 -fingerprint -sha1 -noout -inform pem -in netapp_cert.pem
* 창:
+
 Import-Certificate -Filepath .\netapp_cert.pem -CertStoreLocation Cert:\CurrentUser\Root


서명된 체크섬 파일은 PEM 파일을 사용하여 확인할 수 있습니다.

* 비 Windows:
+
 openssl smime -verify -in sha256.signed -CAfile netapp_cert.pem -purpose any
* Windows(위의 Import-Certificate를 통해 인증서 설치 후):
+
 Get-AuthenticodeSignature -FilePath .\sha256.ps1 $result = Get-AuthenticodeSignature -FilePath .\sha256.ps1 $signer = $result.SignerCertificate Add-Type -Assembly System.Security [Security.Cryptography.x509Certificates.X509Certificate2UI]::DisplayCertificate($signer)


모든 아티팩트가 만족스럽게 확인되면 다음을 실행하여 에이전트 설치를 시작할 수 있습니다.

비 Windows:

 sudo -E -H ./<installation_script_name> --install
창:

 .\cloudinsights-windows.ps1 -install


== Agent 설치 문제 해결

상담원 설정에 문제가 있는 경우 다음과 같은 방법을 시도해 보십시오.

[cols="2*"]
|===
| 문제: | 다음을 시도해 보십시오. 


| Cloud Insights를 사용하여 이미 에이전트를 설치했습니다 | 호스트/VM에 이미 에이전트를 설치한 경우 에이전트를 다시 설치할 필요가 없습니다. 이 경우 Agent 설치 화면에서 해당 플랫폼 및 키를 선택하고 * 계속 * 또는 * 마침 * 을 클릭합니다. 


| 이미 에이전트가 설치되었지만 Cloud Insights 설치 프로그램을 사용하지 않습니다 | 올바른 기본 구성 파일 설정을 위해 이전 에이전트를 제거하고 Cloud Insights 에이전트 설치를 실행합니다. 완료되면 * 계속 * 또는 * 마침 * 을 클릭합니다. 
|===
추가 정보는 에서 찾을 수 있습니다 link:concept_requesting_support.html["지원"] 페이지 또는 에 있습니다 link:https://docs.netapp.com/us-en/cloudinsights/CloudInsightsDataCollectorSupportMatrix.pdf["Data Collector 지원 매트릭스"].
